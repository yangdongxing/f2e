<!DOCTYPE html>
<html>

<head>
    <title>HTML æ¡Œé¢æ¶ˆæ¯é€šçŸ¥</title>
    <meta charset="utf-8">
    <meta name='viewport' content='width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no' />
    
    <link rel="stylesheet" href="http://dxy-developer.github.io/f2e/css/init.css">
    <link rel="stylesheet" href="http://dxy-developer.github.io/f2e/css/particles.css">
    <link rel="stylesheet" href="http://dxy-developer.github.io/f2e/css/markdown.css">
    <link rel="stylesheet" href="http://dxy-developer.github.io/f2e/css/style.css">
    <script type="text/javascript" src="http://dxy-developer.github.io/f2e/js/jquery-1.8.3.min.js"></script>
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
    <script>
      
      function setLeanCloud() {
        AV.initialize('PPDrp7ANvEDvzYqBF2gKC7vY-gzGzoHsz', '60o0boL7ij0mkftarA5kEfNs');
      }
      setLeanCloud();
    </script>
</head>

<body>
    <div class="nav">
        <button class="menu"></button>
        <ul>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/css">css</a>
        <span>(6)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/form">form</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/html5">html5</a>
        <span>(2)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/http">http</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/hybrid">hybrid</a>
        <span>(3)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/novalidate">novalidate</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/promise">promise</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/required">required</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/seo">seo</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/webpack">webpack</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4">è‡ªåŠ¨æäº¤</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">è®¾è®¡æ¨¡å¼</a>
        <span>(1)</span>
    </li>
    
</ul>

    </div>
    <div class="header">
        <a href="http://dxy-developer.github.io/f2e">
            <p class="title J-title">HTML æ¡Œé¢æ¶ˆæ¯é€šçŸ¥</p>
            <p class="title">å›åˆ°é¦–é¡µ</p>
            <p class="sub-title">DXY Tech&amp;Product Division</p>
            <hr />
        </a>
    </div>

<div class="container">
    <div class="left">
        <div class="post markdown-body">
    <p class="post-info J-detail-option">
        Author.<span class="J-author">yaoyj</span> Â·
        Tag.<a href="http://dxy-developer.github.io/f2e/tags/html5">HTML5</a> Â·
        Wed, Jul 6, 2016
    </p>
    <div class="post-body J-hack-url" data-url="http://dxy-developer.github.io/f2e/post/yaoyj/20160706/">
        <p>HTML æ¡Œé¢æ¶ˆæ¯é€šçŸ¥ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡æµè§ˆå™¨çš„ Notification å¯¹è±¡ä¸ºç”¨æˆ·åœ¨ç³»ç»Ÿæ¡Œé¢è®¾ç½®å’Œæ˜¾ç¤ºé€šçŸ¥æé†’ã€‚è¿™æ ·ï¼Œç”¨æˆ·å°±å¯ä»¥åšè‡ªå·±çš„äº‹æƒ…ï¼Œè€Œä¸ç”¨æ‹…å¿ƒä¼šé”™è¿‡ä¸€äº›æ¶ˆæ¯ã€‚
</p>

<h3 id="å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3>

<h5 id="é¦–å…ˆå‘ç”¨æˆ·è·å–åœ¨å½“å‰ç½‘ç«™å±•ç¤ºç³»ç»Ÿé€šçŸ¥çš„æƒé™">é¦–å…ˆå‘ç”¨æˆ·è·å–åœ¨å½“å‰ç½‘ç«™å±•ç¤ºç³»ç»Ÿé€šçŸ¥çš„æƒé™</h5>

<p>è·å–è¿™ä¸ªæƒé™ä¸€èˆ¬åœ¨ç½‘ç«™åœ¨åˆå§‹åŒ–çš„æ—¶å€™å®Œæˆï¼Œä½¿ç”¨ <code>Notification.requestPermission()</code>æ–¹æ³•</p>

<pre><code>    Notification.requestPermission().then(function(status) {
        // æ ¹æ® status çš„å€¼åšä¸€äº›äº‹æƒ… 
        if (Notification.permission !== status) {
            Notification.permission = status;
        }
    });
</code></pre>

<p>è¿”å›çš„ status ä¸ºå­—ç¬¦ä¸²ï¼Œæœ‰ä¸‰ä¸ªå€¼</p>

<ul>
<li>denied (ç”¨æˆ·æ‹’ç»äº†é€šçŸ¥çš„æ˜¾ç¤º)</li>
<li>granted (ç”¨æˆ·å…è®¸äº†é€šçŸ¥çš„æ˜¾ç¤º)</li>
<li>default (é»˜è®¤ä¸º defaultï¼Œä¹Ÿå°±æ˜¯éœ€è¦è¯¢é—®ç”¨æˆ·æ˜¯å¦æˆæƒï¼Œæµè§ˆå™¨çš„è¡¨ç°å’Œ denied ä¸€æ ·)</li>
</ul>

<h5 id="ä¹‹å-å°±å¯ä»¥ç”¨-notification-æ„é€ å‡½æ•°å»ºä¸€æ¡æ–°çš„é€šçŸ¥">ä¹‹åï¼Œå°±å¯ä»¥ç”¨<code>Notification()</code>æ„é€ å‡½æ•°å»ºä¸€æ¡æ–°çš„é€šçŸ¥</h5>

<pre><code>    var notification = new Notification(title, options);    
</code></pre>

<ul>
<li>è¿™é‡Œçš„ title æ˜¯å¿…ä¼ çš„</li>
<li>options æ˜¯å¯é€‰çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒè§„å®šäº†æ–‡æœ¬çš„æ–¹å‘ã€é€šçŸ¥çš„å†…å®¹ã€é€šçŸ¥çš„å›¾æ ‡ç­‰ç­‰</li>
</ul>

<h3 id="å±æ€§">å±æ€§</h3>

<h5 id="é™æ€å±æ€§-notification-permission">é™æ€å±æ€§ï¼š<code>Notification.permission</code></h5>

<p>è¡¨æ˜å½“å‰é€šçŸ¥æ˜¾ç¤ºçš„æˆæƒçŠ¶æ€ï¼Œå€¼å¯èƒ½ä¸ºï¼šdeniedã€grantedã€default</p>

<h5 id="åªè¯»å±æ€§">åªè¯»å±æ€§ï¼š</h5>

<ul>
<li>dir (æ–‡å­—æ–¹å‘ï¼Œç»æµ‹è¯•éƒ½ä¸æ”¯æŒ)</li>
<li>lang (è¯­è¨€)</li>
<li>body (æ¶ˆæ¯ä½“)</li>
<li>tag (æ ‡ç­¾)</li>
<li>icon (å›¾æ ‡åœ°å€)</li>
</ul>

<p>è¿™äº›å±æ€§ï¼Œå¯ä»¥åœ¨åˆ›å»ºæ¶ˆæ¯çš„æ—¶å€™ï¼Œä½œä¸º options çš„å±æ€§ä¼ å…¥ Notificaiton å‡½æ•°ã€‚</p>

<p>é‡ç‚¹æä¸€ä¸‹tagå±æ€§ï¼Œå®ƒç”¨äºç»™ç›¸åŒç±»åˆ«çš„æ¶ˆæ¯åšæ ‡è®°ï¼Œå¦‚æœåœ¨çŸ­æ—¶é—´å†…æœ‰å¾ˆå¤šæ¶ˆæ¯ï¼Œç³»ç»Ÿä¼šåªæ˜¾ç¤ºtagæ ‡è®°çš„æ¶ˆæ¯ä¸­æœ€æ–°çš„ä¸€æ¡</p>

<h3 id="äº‹ä»¶å¤„ç†">äº‹ä»¶å¤„ç†</h3>

<p>Notification.onclick()/onshow()/onerror()/onclose()</p>

<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œonclickäº‹ä»¶ç”¨çš„æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚ç‚¹å‡»æ¶ˆæ¯åè·³è½¬åˆ°ç‰¹å®šé¡µé¢</p>

<h3 id="æ–¹æ³•">æ–¹æ³•</h3>

<h5 id="é™æ€æ–¹æ³•">é™æ€æ–¹æ³•ï¼š</h5>

<ul>
<li>Notification.requestPermission() â€”â€”åªèƒ½è¢«ç”¨æˆ·è¡Œä¸ºè°ƒç”¨ï¼Œæ¯”å¦‚é¡µé¢åŠ è½½æˆ–ç”¨æˆ·ç‚¹å‡»</li>
</ul>

<h5 id="å®ä¾‹æ–¹æ³•-ä»…åœ¨notificationå®ä¾‹æˆ–å…¶prototypeä¸­æœ‰æ•ˆ">å®ä¾‹æ–¹æ³•ï¼ˆä»…åœ¨Notificationå®ä¾‹æˆ–å…¶prototypeä¸­æœ‰æ•ˆï¼‰ï¼š</h5>

<ul>
<li>Notification.close()</li>
<li>ç»§æ‰¿è‡ªEventTargetæ¥å£ï¼šaddEventListener()/removeEventListener()/dispatchEvnet()</li>
</ul>

<h3 id="ä¸¾ä¸ª">ä¸¾ä¸ªğŸŒ°</h3>

<pre><code>    // é¡µé¢åŠ è½½æ—¶ï¼Œè·å–æƒé™
    if (window.Notification &amp;&amp; Notification.permission !== &quot;granted&quot;) {
        Notification.requestPermission(function (status) {
            if (Notification.permission !== status) {
                Notification.permission = status;
            }
        });
    }
    function notifyMe() {
        // åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒNitifocaiton
        if (!(&quot;Notification&quot; in window)) {
            alert(&quot;This browser does not support desktop notification&quot;);
        // åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»å‡†è®¸äº†å‘é€æ¡Œé¢é€šçŸ¥
        } else if (window.Notification &amp;&amp; Notification.permission === 'granted') {
        // å¦‚æœå‡†è®¸äº†ï¼Œæˆ‘ä»¬å°±å‘é€ä¸€æ¡æ¶ˆæ¯
            var n = new Notification('Hi!', {
                body: 'hi, this is body'
            });
        // å¦‚æœç”¨æˆ·æ²¡æœ‰å‡†è®¸ï¼Œæˆ‘ä»¬éœ€è¦å‘ç”¨æˆ·è·å–æƒé™
        } else if (window.Notification &amp;&amp; Notification.permission !== 'denied') {
            Notification.requestPermission(function(status) {
                if (Notification.permission !== status) {
                    Notification.permission = status;
                }
                if (status === 'granted') {
                    var n = new Notification('Hi!', {
                    body: 'hi, this is body'
                    });
                } else {
                    alert('Hi!');
                }
            });
        } else {
            alert('Hi!');
        }
    }
</code></pre>

<p>ï¼ˆåœ¨æˆ‘çš„ Mac ä¸‹ Chrome ä¸­æµ‹è¯•æ—¶ï¼Œä¸èƒ½å¼¹å‡ºé€šçŸ¥ï¼ŒFirefox å’Œ Safari éƒ½å¯ä»¥ï¼Œä½†æ˜¯åˆ«çš„ç”µè„‘çš„ Chrome ä¸­å¯ä»¥ã€‚åŸå› æˆ‘æ²¡æœ‰æŸ¥åˆ°ï¼Œå¸Œæœ›æŸ¥åˆ°çš„å°ä¼™ä¼´å‘Šè¯‰æˆ‘ä¸€ä¸‹ï½ï¼‰</p>

<h3 id="æµè§ˆå™¨å…¼å®¹æ€§">æµè§ˆå™¨å…¼å®¹æ€§</h3>

<p>ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒåŸºæœ¬çš„å±æ€§å’Œæ–¹æ³•ï¼Œé™¤äº† IEã€‚å…·ä½“å±æ€§å’Œæ–¹æ³•çš„æ”¯æŒæƒ…å†µï¼Œå¯è§å‚è€ƒèµ„æ–™</p>

<p>ä¸‹é¢æ˜¯ Nick Desaulniers ç¼–å†™çš„ä¸€ä¸ªå¯ä»¥å‘å‰å‘åå…¼å®¹å„ç§ç‰ˆæœ¬çš„å®ç°</p>

<pre><code>	function sendNotification (title, options) {
	  // Memoize based on feature detection.
	  if (&quot;Notification&quot; in window) {
	    sendNotification = function (title, options) {
	      return new Notification(title, options);
	    };
	  } else if (&quot;mozNotification&quot; in navigator) {
	    sendNotification = function (title, options) {
	      // Gecko &lt; 22
	      return navigator.mozNotification
	               .createNotification(title, options.body, options.icon)
	               .show();
	    };
	  } else {
	    sendNotification = function (title, options) {
	      alert(title + &quot;: &quot; + options.body);
	    };
	  }
	  return sendNotification(title, options);
	};
</code></pre>

<h5 id="chrome-å¤‡å¿˜">Chrome å¤‡å¿˜</h5>

<p>åœ¨ Chrome 22 ç‰ˆæœ¬ä¹‹å‰ï¼Œå¦‚æœè¦ä½¿ç”¨é€šçŸ¥éœ€è¦æ—§çš„å¸¦å‰ç¼€ç‰ˆæœ¬çš„è§„èŒƒ ï¼Œå¹¶ä¸”ä½¿ç”¨navigator.webkitNotifications å¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„é€šçŸ¥å®ä¾‹ã€‚</p>

<p>åœ¨ Chrome 32 ç‰ˆæœ¬ä¹‹å‰ï¼Œä¸æ”¯æŒ Notification.permission å±æ€§ã€‚</p>

<p>åœ¨Chrome 42 ç‰ˆæœ¬ä¹‹å‰ï¼Œä¸æ”¯æŒ service workerã€‚</p>

<p>ä»chrome 49ç‰ˆæœ¬å¼€å§‹ï¼ŒåŒ¿åæ¨¡å¼ä¸‹çš„notificationsä¸èƒ½è¿è¡Œã€‚</p>

<h5 id="safari-å¤‡å¿˜">Safari å¤‡å¿˜</h5>

<p>Safari åœ¨ Safari 6 ç‰ˆæœ¬å¼€å§‹æ”¯æŒé€šçŸ¥ï¼Œä½†æ˜¯åªèƒ½åœ¨ Mac OSX 10.8+ (Mountain Lion) ä¸­ä½¿ç”¨ã€‚</p>

<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>

<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/notification">Notification - Web Api æ¥å£</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/notification/Using_Web_Notifications">ä½¿ç”¨ Web Notification</a></li>
</ul>
    </div>
</div>

<script type="text/javascript">
  $(function() {
    var VisitTable = AV.Object.extend('Visit');
    var URLLinkId = location.pathname;
    var author = $('.J-author').text() || '';
    var title = $('.J-title').text() || '';

    
    function postVisitData() {
      var visit = new VisitTable();
      var query = new AV.Query('Visit');

      query.equalTo('link', URLLinkId)
      query.find().then(function(list) {
        var count = 1;
        if (list.length > 0) {
          var item = list[0];
          item.increment('visitCount');
          item.save();
          count = item.get('visitCount');
        } else {
          visit.increment('visitCount');
          visit.save({
            link: URLLinkId,
            author: author,
            title: title
          });
        }
        $('.J-detail-option').append('Â· æµè§ˆé‡. <span>' + count + '</span>');
      });
    }

    postVisitData();
  });
</script>


        
<div class="ds-thread" data-thread-key="http://dxy-developer.github.io/f2e/blog/2016/07/06/html-%E6%A1%8C%E9%9D%A2%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5/" data-title="HTML æ¡Œé¢æ¶ˆæ¯é€šçŸ¥" data-url="http://dxy-developer.github.io/f2e/blog/2016/07/06/html-%E6%A1%8C%E9%9D%A2%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5/"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"dxy-developer"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>


    </div>
    <div class="right">
    
    <div class="assort">
        <p>åˆ†ç±»</p>
        <ul>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/css">css</a>
        <span>(6)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/form">form</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/html5">html5</a>
        <span>(2)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/http">http</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/hybrid">hybrid</a>
        <span>(3)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/novalidate">novalidate</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/promise">promise</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/required">required</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/seo">seo</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/webpack">webpack</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4">è‡ªåŠ¨æäº¤</a>
        <span>(1)</span>
    </li>
    
    <li>
        <a href="http://dxy-developer.github.io/f2e/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">è®¾è®¡æ¨¡å¼</a>
        <span>(1)</span>
    </li>
    
</ul>

    </div>
</div>

</div>
<div id="gotop">
	<a href="javascript:;">TOP</a>
</div>
<div class="footer">
    <p>Establishment Â· ä¸é¦™å›­å‰ç«¯</p>
</div>
<script type="text/javascript" src="http://dxy-developer.github.io/f2e/js/script.js"></script>
</body>

</html>

<div id="particles-js"></div>
<script type="text/javascript" src="http://dxy-developer.github.io/f2e/js/particles.js"></script>
<script type="text/javascript">
	particlesJS.load('particles-js', 'http:\/\/dxy-developer.github.io\/f2e/json/particles.json', null);
</script>

